<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="cheminfo ELN documentation Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="cheminfo ELN documentation Blog Atom Feed"><title data-react-helmet="true">Deploying the ELN | cheminfo ELN documentation</title><meta data-react-helmet="true" property="og:url" content="https://docs.c6h6.org/docs/eln/installation/setup"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Deploying the ELN | cheminfo ELN documentation"><meta data-react-helmet="true" name="description" content="System requirements"><meta data-react-helmet="true" property="og:description" content="System requirements"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.c6h6.org/docs/eln/installation/setup"><link data-react-helmet="true" rel="alternate" href="https://docs.c6h6.org/docs/eln/installation/setup" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.c6h6.org/docs/eln/installation/setup" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.79abd863.css">
<link rel="preload" href="/docs/assets/js/runtime~main.af32fba8.js" as="script">
<link rel="preload" href="/docs/assets/js/main.6f1279ff.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.png" alt="Cheminfo logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.png" alt="Cheminfo logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/eln/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cheminfo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/eln/">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Landing page</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Samples</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Structural analysis</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Physical chemistry/Materials science</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Other analysis</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Machine learning</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ELN / Reactions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reporting and publications</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Other functionalities</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">For developers</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eln/for_developers/contributing/developmentSetup">Making our development environment ready for contributions to cheminfo</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Editing the documentation</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Installation</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/eln/installation/setup">Deploying the ELN</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eln/installation/importation">Automatic importation of files (jcamp, etc.)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eln/installation/customization">Customizing the deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eln/installation/backup">Backing up the system</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/eln/for_developers/token/README">Creating access tokens</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Deploying the ELN</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="system-requirements"></a>System requirements<a class="hash-link" href="#system-requirements" title="Direct link to heading">#</a></h2><p>To host an instance of the ELN no special hardware is needed. In principle, an old computer with 8 GB of RAM and an old CPU can be used.
The system itself will not need a lot of space of the hard drive and the required hard drive space will depend on the amount of data you want to store (to get started, even 32 GB are enough to store &gt;6,000 5 MB files, and most chemical files are smaller).</p><p>We recommend that you use CentOS or Ubuntu as operating system.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="installing-dependencies"></a>Installing dependencies<a class="hash-link" href="#installing-dependencies" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-install-docker-and-docker-compose-and-some-dependencies"></a>1. Install docker and docker-compose and some dependencies<a class="hash-link" href="#1-install-docker-and-docker-compose-and-some-dependencies" title="Direct link to heading">#</a></h3><p>On Red Hat Linux/CentOS you need to run the following commands:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum update -y</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> epel-release -y</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">git</span><span class="token plain"> docker docker-compose -y</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In Ubuntu you can use the apt package manager to install dependencies.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-install-nodejs"></a>2. Install Node.js<a class="hash-link" href="#2-install-nodejs" title="Direct link to heading">#</a></h3><p>On Red Hat Linux/CentOS you need to run the following commands:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -sL https://rpm.nodesource.com/setup_14.x </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bash</span><span class="token plain"> -</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum </span><span class="token function" style="color:rgb(130, 170, 255)">install</span><span class="token plain"> -y nodejs</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can use <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">similar commands or installers</a> on other operating systems.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-optional-configurations"></a>3. Optional configurations<a class="hash-link" href="#3-optional-configurations" title="Direct link to heading">#</a></h3><ul><li><a href="https://www.rootusers.com/how-to-enable-or-disable-selinux-in-centos-rhel-7/" target="_blank" rel="noopener noreferrer">On CentOS/Red Hat Linux you might want to permanently disable SE Linux</a></li><li>If you are behind a corporate proxy you can follow <a href="https://docs.docker.com/engine/admin/systemd/#/http-proxy" target="_blank" rel="noopener noreferrer">the guide to configure Docker to use the proxy</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getting-the-eln-code-and-running-it"></a>Getting the ELN code and running it<a class="hash-link" href="#getting-the-eln-code-and-running-it" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="1-start-docker-daemon"></a>1. Start docker daemon<a class="hash-link" href="#1-start-docker-daemon" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl start docker</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">enable</span><span class="token plain"> docker</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Don&#x27;t use docker</h5></div><div class="admonition-content"><p>You should not use the docker instruction because it is not aware of dependencies, and it could lead to unexpected results. Please always use docker-compose instead.</p><p>In order to check all the running docker images: <code>docker-compose ps</code>. To restart a specific image: <code>docker-compose restart rest-on-couch</code></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="2-clone-this-repo"></a>2. Clone this repo<a class="hash-link" href="#2-clone-this-repo" title="Direct link to heading">#</a></h3><p>We recommend that you run it from <code>/usr/local/docker</code>, but this is not crucial for this system.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> /usr/local/docker</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /usr/local/docker</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L https://github.com/cheminfo/roc-eln-docker/archive/master.tar.gz </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> xz</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> roc-eln-docker-master roc-eln-docker</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> roc-eln-docker</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="3-edit-configuration"></a>3. Edit configuration<a class="hash-link" href="#3-edit-configuration" title="Direct link to heading">#</a></h3><ol><li>Adjust the options in <code>.env</code>. Mandatory configuration options have the value <code>REPLACEME</code></li><li>Optional: edit <code>flavor-builder-config.json</code> to configure home page</li><li>If LDAP configuration is needed, edit <code>rest-on-couch/home/ldap.js</code>.</li></ol><p>If you want a default configuration you might just follow the continuous integration instead of the next steps in this section (Visualizer, ELN, Printers). That is, run the <code>ci/install.sh</code> script followed by <code>docker-compose up -d</code>.</p><p>You might want to use the <code>ngnix</code> proxy directly without additional Apache or Ngnix server. In this case, you&#x27;ll need to set <code>NGINX_PORT</code> to 80 (HTTP) or 443 (HTTPS), modify the docker compose to something like</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  nginx-proxy:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    image: docker.io/nginx:1.14-alpine</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ports:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      - &quot;${NGINX_PORT}:80&quot; # or  &quot;${NGINX_PORT}:433&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>and the <code>ngnix</code> configuration to read the SSL certificates in case you use SSL.</p><p>If you do not make these changes, you&#x27;ll need to set up an Apache or Ngnix server on our system. This is configuration is preferable in case you have more than one serivce running on your server.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="visualizer"></a>Visualizer<a class="hash-link" href="#visualizer" title="Direct link to heading">#</a></h4><p>Copy the <a href="https://github.com/NPellet/visualizer" target="_blank" rel="noopener noreferrer">visualizer</a> config to <code>rest-on-couch/home/visualizer</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> rest-on-couch/home</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L https://github.com/cheminfo/roc-visualizer-config/archive/master.tar.gz </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> xz</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> roc-visualizer-config-master visualizer</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="eln"></a>ELN<a class="hash-link" href="#eln" title="Direct link to heading">#</a></h4><p>Copy the ELN config to <code>rest-on-couch/home/eln</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> rest-on-couch/home</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L https://github.com/cheminfo/roc-eln-config/archive/master.tar.gz </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> xz</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> roc-eln-config-master eln</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> eln</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="printers"></a>Printers<a class="hash-link" href="#printers" title="Direct link to heading">#</a></h4><p>Copy the printer config to <code>rest-on-couch/home/printers</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> rest-on-couch/home</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">curl</span><span class="token plain"> -L https://github.com/cheminfo/roc-printers-config/archive/master.tar.gz </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">tar</span><span class="token plain"> xz</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">mv</span><span class="token plain"> roc-printers-config-master printers</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="4-start-the-application"></a>4. Start the application<a class="hash-link" href="#4-start-the-application" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /usr/local/docker/roc-eln-docker</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose pull</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker-compose up -d --build</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Updating the system</h5></div><div class="admonition-content"><p>The docker-compose.yml file contains the list of all the docker images required by this project, their version as well as their dependencies. If you want to update the version of an image you should change the name in the docker-compose.yml. After changing this file you should run: <code>docker-compose up -d --build</code> (<code>-d</code> allows to put the process in background).</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setting-up-an-apache-server"></a>Setting up an Apache server<a class="hash-link" href="#setting-up-an-apache-server" title="Direct link to heading">#</a></h2><p>Under RedHat/CentOs run</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum install httpd -y</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl enable httpd</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>then, create <code>/etc/httpd/conf.d/eln.conf</code> with the following content</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;VirtualHost *:80&gt;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ServerAdmin     a@b.com</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ServerName      eln.myinstitution.org</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SetEnvIf Origin &quot;^(.*)$&quot; AccessControlAllowOrigin=$0</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Header set Access-Control-Allow-Origin %{AccessControlAllowOrigin}e env=AccessControlAllowOrigin</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Header set Vary Origin</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Header set Access-Control-Expose-Headers &quot;ETag, Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    AllowEncodedSlashes NoDecode</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ProxyPass / http://localhost:4444/ nocanon</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ProxyPassReverse / http://localhost:4444/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;/VirtualHost&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In case you want to use SSL, you can listen on port 433 and add your SSL certificates. To check your configuration, you can use <code>apachectl configtest</code></p><p>You can start the server with <code>systemctl start httpd</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="firewalliptables"></a>Firewall/iptables<a class="hash-link" href="#firewalliptables" title="Direct link to heading">#</a></h2><p>If you did not already install iptables, you can do it with</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum install iptables-services -y</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl start iptables</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl enable iptables</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>to allow HTTP on port 80 add the following rule to <code>/etc/sysconfig/iptables</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-A INPUT -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Note that docker will install new chains in iptables. This means you may not restart iptables once docker is started ! If you really have to restart iptables service then you will have also to restart docker and docker-compose.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="groups"></a>Groups<a class="hash-link" href="#groups" title="Direct link to heading">#</a></h2><p>Typically, you will want to set up groups in the database to easily manage access to documents. You can do so via the <code>roc/</code> endpoint of your deployment.
For this, log in as <code>admin@cheminfo.org</code> and select the &quot;ELN&quot; database.</p><p><img alt="Logging in as admin@cheminfo.org at the roc enpoint" src="/docs/assets/images/logging_in_as_admin-33927cdd99c5875d006319a247fba32f.gif"></p><p>In the &quot;Groups&quot; section you can then administer groups. To create a group, you only have to enter the name of the group.
<img alt="Creating a group" src="/docs/assets/images/creating_a_group-3c0b0ad283ba19c2ecc68774ae7d762e.gif"></p><p>Once you created a group, you can add users and owners by adding the usernames (email addresses) and specifying the rights (e.g., <code>read, write</code>)
<img alt="Adding a user to a group" src="/docs/assets/images/adding_user_to_group-d0bb98789ca6812f1a710da64714ef4c.gif"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="creating-user-accounts"></a>Creating user accounts<a class="hash-link" href="#creating-user-accounts" title="Direct link to heading">#</a></h2><p>In case you do not use the LDAP or Google authentication, you will need to create user accounts. To do so, you can use the frontend at the <code>roc/</code> endpoint. If you want to create many users at once, you might want to use a script that inserts the documents into the <code>_users</code> database. In both approaches, you will set some initial password which users can change themselves at the <code>roc/</code> endpoint.</p><p><img alt="Create a user account" src="/docs/assets/images/create_a_user_account-5e8c8d35ce8217bcd0bf3b34f15d1ec7.gif"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="user-forgot-password"></a>User forgot password<a class="hash-link" href="#user-forgot-password" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="couchdb-authentication"></a>CouchDB authentication<a class="hash-link" href="#couchdb-authentication" title="Direct link to heading">#</a></h2><p>If a user forgot a password, the admin can provide the users with a new password by updating the document of the user in the couchdb <code>_users</code> database (for example, this can conveniently be done from the Fauxton interface at the <code>_utils</code> endpoint of your database URL). By inserting the field <code>password</code> with a new password in the document, the password will be updated, and the user can change the password from the <code>roc/</code> endpoint.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="google-or-ldap-authentication"></a>Google or LDAP authentication<a class="hash-link" href="#google-or-ldap-authentication" title="Direct link to heading">#</a></h2><p>In case the account uses Google or LDAP authentication you cannot help the user other than by referring to the password reset procedure of the authentication provider (LDAP, Google).</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/cheminfo/eln-docs/edit/main/docs/89_for_developers/installation/10_setup/index.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/eln/for_developers/documentation/admonitions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Admonitions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/eln/installation/importation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Automatic importation of files (jcamp, etc.) Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#system-requirements" class="table-of-contents__link">System requirements</a></li><li><a href="#installing-dependencies" class="table-of-contents__link">Installing dependencies</a><ul><li><a href="#1-install-docker-and-docker-compose-and-some-dependencies" class="table-of-contents__link">1. Install docker and docker-compose and some dependencies</a></li><li><a href="#2-install-nodejs" class="table-of-contents__link">2. Install Node.js</a></li><li><a href="#3-optional-configurations" class="table-of-contents__link">3. Optional configurations</a></li></ul></li><li><a href="#getting-the-eln-code-and-running-it" class="table-of-contents__link">Getting the ELN code and running it</a><ul><li><a href="#1-start-docker-daemon" class="table-of-contents__link">1. Start docker daemon</a></li><li><a href="#2-clone-this-repo" class="table-of-contents__link">2. Clone this repo</a></li><li><a href="#3-edit-configuration" class="table-of-contents__link">3. Edit configuration</a></li><li><a href="#4-start-the-application" class="table-of-contents__link">4. Start the application</a></li></ul></li><li><a href="#setting-up-an-apache-server" class="table-of-contents__link">Setting up an Apache server</a></li><li><a href="#firewalliptables" class="table-of-contents__link">Firewall/iptables</a></li><li><a href="#groups" class="table-of-contents__link">Groups</a></li><li><a href="#creating-user-accounts" class="table-of-contents__link">Creating user accounts</a></li><li><a href="#user-forgot-password" class="table-of-contents__link">User forgot password</a></li><li><a href="#couchdb-authentication" class="table-of-contents__link">CouchDB authentication</a></li><li><a href="#google-or-ldap-authentication" class="table-of-contents__link">Google or LDAP authentication</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Cheminfo contributors. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.af32fba8.js"></script>
<script src="/docs/assets/js/main.6f1279ff.js"></script>
</body>
</html>